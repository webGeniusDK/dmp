"undefined"!=typeof jQuery&&jQuery(function($){var $form=$("#wpbdp-checkout-form"),submitButtonSelector='.wpbdp-checkout-submit input[type="submit"]:visible',stripe=null,configuration=null,isStripeSelected=function(){return"stripe"===$form.find('[name="gateway"]:checked').val()},configureStripe=function(){if("undefined"!=typeof StripeCheckout&&isStripeSelected()){var $script=$("#wpbdp-stripe-checkout-configuration"),$submit=$form.find(submitButtonSelector);$submit.prop("disabled",!0),null===configuration&&(configuration=$.parseJSON($script.attr("data-configuration"))),configuration.label&&($submit.val(configuration.label),delete configuration.label),null===stripe&&(stripe=StripeCheckout.configure({key:configuration.key,token:function(token){$form.prepend($('<input type="hidden" name="stripeToken" value="'+token.id+'" />')),$form.prepend($('<input type="hidden" name="stripeEmail" value="'+token.email+'" />')),configuration.billingAddress&&($form.prepend($('<input type="hidden" name="stripeBillingName" value="'+token.card.name+'" />')),["Line1","City","Country","Zip"].forEach(function(val){token.card["address_"+val.toLowerCase()]&&$form.prepend($('<input type="hidden" name="stripeBillingAddress'+val+'" value="'+token.card["address_"+val.toLowerCase()]+'" />'))})),$form.submit()}})),$submit.prop("disabled",!1)}};$(window).on("wpbdp-payment-gateway-loaded",function(event,gateway){"stripe"===gateway&&configureStripe()}),$form.on("click",submitButtonSelector,function(event){return(!isStripeSelected()||null!==stripe)&&(null===stripe||null===configuration||(event.preventDefault(),void stripe.open(configuration)))}),window.addEventListener("popstate",function(){null!==stripe&&stripe.close()}),configureStripe()});