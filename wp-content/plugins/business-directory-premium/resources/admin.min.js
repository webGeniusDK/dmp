var BDPConnect=window.BDPConnect||function($){return{init:function(){$(".wpbdp-main-license .wpbdp-license-key-activate-btn, .wpbdp-main-license .wpbdp-license-key-deactivate-btn").click(function(e){var $button,$setting,$msg,activate,$field;e.preventDefault(),$button=$(this),$setting=$button.parents(".wpbdp-license-key-activation-ui"),$msg=$setting.find(".wpbdp-license-key-activation-status-msg"),activate=$button.is(".wpbdp-license-key-activate-btn"),$field=$setting.find("input.wpbdp-license-key-input"),e=$setting.data("licensing"),$msg.hide(),$button.data("original_label",$(this).val()),$button.val($(this).data("working-msg")),$button.prop("disabled",!0),e.action=activate?"wpbdp_activate_main_license":"wpbdp_deactivate_main_license",e.license_key=$field.val(),$.post(ajaxurl,e,function(res){var classes;res.success?($msg.removeClass("status-error").addClass("status-success").html(res.message).show(),activate?((classes=$setting.attr("class").split(" ").filter(function(item){item=item.trim();return 0!==item.length&&!item.match(/^wpbdp-license-status/)})).push("wpbdp-license-status-valid"),$setting.attr("class",classes.join(" ")),$field.addClass("hidden")):($setting.removeClass("wpbdp-license-status-valid").addClass("wpbdp-license-status-invalid"),$field.val(""),$field.attr("type","text")),$field.prop("readonly",!!activate)):($msg.removeClass("status-success").addClass("status-error").html(res.error).show(),$setting.removeClass("wpbdp-license-status-valid").addClass("wpbdp-license-status-invalid"),$field.prop("readonly",!1)),$button.val($button.data("original_label")),$button.prop("disabled",!1)},"json")})}}}((document,window,jQuery));BDPConnect.init();