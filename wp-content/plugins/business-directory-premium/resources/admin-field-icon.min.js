!function($){$.fn.wpbdpIconPicker=function(){var icons,$target,options=["dashicons","fa"],$list=$("");function fontSet(){"dashicons"===options[0]?(icons=WPBDPIcon.icons.dash,options[1]="dashicons"):"fa"===options[0]&&(icons=WPBDPIcon.icons.fa,options[1]="fa",0===icons.length)&&(options[0]="dashicons",fontSet())}function buildList($popup,$button,clear){var i,item,iconspan;for(i in $list=$popup.find(".wpbdp-icon-picker-list"),1==clear&&$list.empty(),icons)item=$("<li></li>").attr("data-icon",icons[i]),iconspan=$("<span></span>").addClass(icons[i]),iconspan=$('<a href="#"></a>').attr("title",icons[i]).append(iconspan),$list.append(item.append(iconspan));$("a",$list).click(function(e){var title=$(this).attr("title");e.preventDefault(),$target.val(options[0]+"|"+title),$button.removeClass().addClass("button wpbdp-icon-picker "+title),$button.attr("data-selected",options[0]),$(".wpbdp-icon-picker-container").remove()})}fontSet(),$(".wpbdp-icon-picker").each(function(){$(this).on("click.wpbdpIconPicker",function(){var $control,$searchField,$popup,$button=$(this),useFA=WPBDPIcon.has_fa_plugin;$target=$($button.data("target")),options[0]=$button.attr("data-selected"),$popup=$('<div class="wpbdp-icon-picker-container'+(useFA?" wpbdp-with-fa":"")+'"> <div class="wpbdp-icon-picker-control"></div><ul class="wpbdp-icon-picker-list"></ul></div>').css({top:$button.offset().top,left:$button.offset().left}),fontSet(),buildList($popup,$button,0),$control=$popup.find(".wpbdp-icon-picker-control"),$searchField=$('<a data-direction="back" href="#"><span class="dashicons dashicons-arrow-left-alt2"></span></a> <input type="text" class="wpbdp-icon-picker-placeholder" /><a data-direction="forward" href="#"><span class="dashicons dashicons-arrow-right-alt2"></span></a>'),useFA?$control.html('<p><label><input type="radio" value="dashicons" name="wpbdp-font"/>Dashicons</label> <label><input type="radio" value="fa" name="wpbdp-font"/>Font Awesome</label></p>'):$control.html('<input type="hidden" name="wpbdp-font" value="dashicons"/>'),$control.append($searchField),$control.find("input.wpbdp-icon-picker-placeholder").attr("placeholder",WPBDPIcon.search),$('input[name="wpbdp-font"]',$control).on("change",function(e){e.preventDefault(),this.checked&&(options[0]=this.value,fontSet(),buildList($popup,$button,1))}),$("a",$control).click(function(e){e.preventDefault(),"back"===$(this).data("direction")?$("li:gt("+(icons.length-26)+")",$list).each(function(){$(this).prependTo($list)}):$("li:lt(25)",$list).each(function(){$(this).appendTo($list)})}),$popup.appendTo("body").show(),$('input[name="wpbdp-font"][value="'+options[0]+'"]').attr("checked","checked").change(),$("input",$control).on("keyup",function(){var search=$(this).val();""===search?$("li:lt(25)",$list).show():$("li",$list).each(function(){-1!==$(this).data("icon").toString().toLowerCase().indexOf(search.toLowerCase())?$(this).show():$(this).hide()})})})})},$(function(){$(".wpbdp-icon-picker").wpbdpIconPicker()}),$(document).on("change","#wpbdp-formfield-form select.wpbd-field-label-select",function(){var $fieldVisibility=$(this).find("option:selected").val(),$iconArea=$(".if-field-icon");"icon"===$fieldVisibility||"fieldlabelicon"===$fieldVisibility||"valueicon"===$fieldVisibility?$iconArea.removeClass("wpbdp-hidden"):$iconArea.addClass("wpbdp-hidden")})}(jQuery);